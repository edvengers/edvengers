<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Student Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
</head>
<body class="portal-body">
  <header class="ev-header">
    <div class="ev-container ev-nav">
      <div class="ev-logo">Edvengers Student</div>
      <a href="index.html" class="btn-ghost">Exit</a>
    </div>
  </header>

  <main>
    <section id="student-login-section">
      <div class="ev-container" style="padding: 3rem 0;">
        <h1>Student Login</h1>
        <div class="dashboard-card">
          <form id="student-login-form">
            <label>Name</label><input id="login-name" type="text" placeholder="Ethan Tan" required />
            <label>Password</label><input id="login-password" type="password" required />
            <p class="helper-text" style="color: #a9b4d8; margin-bottom: 1rem;">
              First time? Use default password: <strong>heroes2026</strong>
            </p>
            <button type="submit" class="btn-primary">Enter Hub</button>
          </form>
        </div>
      </div>
    </section>

    <section id="student-password-section" style="display:none;">
      <div class="ev-container">
        <h1>Set Secret Password</h1>
        <div class="dashboard-card">
          <form id="change-password-form">
            <label>New Secret Password</label><input id="new-password" type="text" required />
            <button type="submit" class="btn-primary">Save & Start</button>
          </form>
        </div>
      </div>
    </section>

    <section id="student-hub-section" style="display:none;">
      <div class="ev-container" style="padding: 2rem 0;">
        
        <div class="dashboard-grid">
          <div class="card">
            <div class="card-header">Profile</div>
            <div class="profile-section">
              <img id="user-avatar" src="https://api.dicebear.com/7.x/bottts/svg?seed=1" class="profile-avatar" onclick="toggleAvatarSelector()" title="Change Avatar" />
              <div>
                <div style="font-size:1.2rem; font-weight:bold;" id="profile-name">Hero</div>
                <div style="color:gold; font-weight:bold;">â­ <span id="hero-stars-count">0</span> Points</div>
              </div>
            </div>
            
            <div id="avatar-selector" style="display:none; margin-top:1rem; border-top:1px solid rgba(255,255,255,0.1);">
              <p class="helper-text">Pick a new look:</p>
              <div class="avatar-grid" id="avatar-options">
                </div>
            </div>

            <hr style="border:0; border-top:1px solid rgba(255,255,255,0.1); margin: 1rem 0;">
            <button id="btn-attendance" class="btn-primary">ğŸ™‹â€â™‚ï¸ I'm Here!</button>
          </div>

          <div class="card">
            <div class="card-header">Live Lesson</div>
            <p class="helper-text">Join 5 mins early. Have notebook ready.</p>
            <a href="https://us06web.zoom.us/j/9900999009?pwd=4p3nEzSTnskpvfcIdaQrgRm7yfhrng.1" target="_blank" class="btn-primary" style="display:inline-block; text-align:center; text-decoration:none;">
              Join Zoom
            </a>
          </div>
        </div>

        <div class="dashboard-grid" style="margin-top:1.5rem;">
           <div class="card">
             <div class="card-header">ğŸ® Game Zone</div>
             <div id="booklet-list">
               <p class="helper-text">No games assigned for your level yet.</p>
             </div>
           </div>
           
           <div class="card">
             <div class="card-header">ğŸ“¢ Announcements</div>
             <div id="student-announcements"></div>
           </div>
        </div>

        <div class="card" style="margin-top:1.5rem;">
          <div class="card-header">ğŸ“ Homework</div>
          <div id="student-homework-list"></div>
        </div>

        <div class="card" style="margin-top:1.5rem;">
          <div class="card-header">Chat with Teacher</div>
          <div id="chat-window" class="chat-window"></div>
          <form id="chat-form" style="display:flex; gap:0.5rem;">
            <input id="chat-input" type="text" placeholder="Message..." style="margin:0;" />
            <label style="margin:0; cursor:pointer; font-size:1.5rem;">
              ğŸ“· <input type="file" id="chat-image" accept="image/*" style="display:none;" />
            </label>
            <button type="submit" class="btn-primary" style="width:auto;">Send</button>
          </form>
        </div>

      </div>
    </section>
  </main>

  <div id="mission-overlay" class="mission-overlay hidden">
    <div class="mission-header">
      <span class="mission-title">âš¡ Mission</span>
      <button class="btn-ghost" onclick="closeMission()">Close</button>
    </div>
    <div class="mission-frame-container"><iframe id="mission-frame" src=""></iframe></div>
  </div>
  <div id="flying-hero" class="flying-hero hidden">ğŸ¦¸â€â™‚ï¸</div>

  <script src="app-student.js" type="module"></script>
</body>
</html>