<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Edvengers Student Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
</head>
<body class="portal-body">
  <header class="ev-header">
    <div class="ev-container ev-nav">
      <div class="ev-logo"><span class="ev-logo-mark">E</span><span class="ev-logo-text">Edvengers</span></div>
      <nav class="ev-nav-links"><a href="index.html" class="btn btn-ghost btn-back">Back to Main Site</a></nav>
    </div>
  </header>

  <main>
    <section id="student-login-section">
      <div class="ev-container" style="padding: 2.5rem 0;">
        <h1>Student Login</h1>
        <div class="dashboard-card">
          <form id="student-login-form">
            <div class="form-field"><label>Name</label><input id="login-name" type="text" placeholder="Ethan Tan" required /></div>
            <div class="form-field"><label>Password</label><input id="login-password" type="password" placeholder="Password" required /></div>
            <button type="submit" class="btn btn-primary">Enter Hub</button>
          </form>
        </div>
      </div>
    </section>

    <section id="student-password-section" style="display:none;">
      <div class="ev-container" style="padding: 2.5rem 0;">
        <h1>Set Secret Password</h1>
        <div class="dashboard-card">
          <form id="change-password-form">
            <div class="form-field"><label>New Password</label><input id="new-password" type="text" required /></div>
            <button type="submit" class="btn btn-primary">Save & Enter</button>
          </form>
        </div>
      </div>
    </section>

    <section id="student-hub-section" style="display:none;">
      <div class="ev-container" style="padding:2rem 0;">
        <h1>Hi <span id="student-name-display">hero</span>!</h1>

        <div class="dashboard-grid">
          <div class="card">
            <div class="card-header" style="display:flex; justify-content:space-between;">
              Your Details
              <div class="profile-avatar-container">
                <img id="user-avatar" src="https://via.placeholder.com/60" class="profile-avatar" />
                <label class="avatar-edit-btn" for="avatar-upload">ğŸ“·</label>
                <input type="file" id="avatar-upload" accept="image/*" style="display:none;" />
              </div>
            </div>
            <p>Name: <strong id="profile-name"></strong></p>
            <p>Hero Points: <strong id="hero-stars-count" style="color:gold; font-size:1.2rem;">0</strong></p>
          </div>

          <div class="card">
            <div class="card-header">Actions</div>
            <button id="btn-attendance" class="btn btn-primary" style="width:100%; margin-bottom:0.5rem;">ğŸ™‹â€â™‚ï¸ I'm Here!</button>
            <div id="game-zone-container" style="display:none; margin-top:0.5rem; border-top:1px solid rgba(255,255,255,0.1); padding-top:0.5rem;">
              <p class="helper-text"><strong>Play Zone:</strong></p>
              <button id="btn-game-zone" class="btn btn-ghost" style="width:100%; color:var(--ev-accent);">ğŸ® Play Booklet</button>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:1rem;">
          <div class="card-header">Live Class</div>
          <p class="helper-text">Have your notebook ready.</p>
          <a href="https://us06web.zoom.us/j/9900999009?pwd=4p3nEzSTnskpvfcIdaQrgRm7yfhrng.1" target="_blank" class="btn btn-primary" style="width:100%">
            Join Zoom Lesson
          </a>
        </div>

        <div class="card" style="margin-top: 1rem;">
          <div class="card-header">Announcements</div>
          <div id="student-announcements"></div>
        </div>

        <div class="card">
          <div class="card-header">Homework</div>
          <div id="student-homework-list"></div>
        </div>

        <section class="dashboard-card">
          <div class="card-header">Chat Teacher</div>
          <div id="chat-window" class="chat-window"></div>
          <form id="chat-form" class="chat-form">
            <div class="chat-row-inputs">
              <label class="chat-label" style="flex:1;">
                <textarea id="chat-input" rows="1" placeholder="Message..."></textarea>
              </label>
              <label class="file-label" style="margin-left:0.5rem;">
                ğŸ“· <input type="file" id="chat-image" accept="image/*" style="display:none;" />
              </label>
            </div>
            <button type="submit" class="btn btn-primary" style="width:100%; margin-top:0.5rem;">Send</button>
          </form>
        </section>
      </div>
    </section>
  </main>

  <div id="mission-overlay" class="mission-overlay hidden">
    <div class="mission-header">
      <span class="mission-title">âš¡ Current Mission</span>
      <button class="btn btn-ghost btn-small" onclick="closeMission()">âŒ Close</button>
    </div>
    <div class="mission-frame-container">
      <iframe id="mission-frame" src="" frameborder="0"></iframe>
    </div>
  </div>

  <div id="flying-hero" class="flying-hero hidden">ğŸ¦¸â€â™‚ï¸</div>

  <script src="app-student.js" type="module"></script>
</body>
</html>