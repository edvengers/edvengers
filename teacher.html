<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Edvengers Teacher Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body class="portal-body">
    <header class="ev-header">
      <div class="ev-container ev-nav">
        <div class="ev-logo">
          <span class="ev-logo-mark">E</span>
          <span class="ev-logo-text">Edvengers</span>
        </div>
        <nav class="ev-nav-links">
          <a href="index.html" class="btn btn-ghost btn-back">
            ‚Üê Back to Main Site
          </a>
        </nav>
      </div>
    </header>

    <main>
      <section id="teacher-login-section">
        <div class="ev-container" style="padding:2.5rem 0 3rem;">
          <h1>Teacher Login</h1>
          <p class="ev-helper-text">
            Internal dashboard for Edvengers teachers.
          </p>
          <div class="dashboard-card">
            <form id="teacher-login-form">
              <div class="form-field">
                <label for="teacher-username">Username</label>
                <input id="teacher-username" type="text" placeholder="e.g. andy" required />
              </div>
              <div class="form-field">
                <label for="teacher-password">Password</label>
                <input id="teacher-password" type="password" required />
              </div>
              <p class="helper-text">For now, this uses a simple shared password you control.</p>
              <p id="teacher-login-error" class="helper-text" style="color:#ff6b6b; display:none;"></p>
              <button type="submit" class="btn btn-primary">Enter Dashboard</button>
            </form>
          </div>
        </div>
      </section>

      <section id="teacher-dashboard-section" style="display:none;">
        <div class="ev-container" style="padding:2.5rem 0 3.5rem;">
          
          <div class="dashboard-top-row">
            <h1>Teacher Dashboard</h1>
            <button id="teacher-logout-btn" class="btn btn-ghost">Log out</button>
          </div>
          <p class="ev-helper-text">Welcome back, Commander.</p>

          <div class="ev-tab-nav">
            <button class="ev-tab-btn active" onclick="switchTab('admin')">üèõÔ∏è Admin HQ</button>
            <button class="ev-tab-btn" onclick="switchTab('missions')">üöÄ Missions Control</button>
            <button class="ev-tab-btn" onclick="switchTab('comms')">üí¨ Comms Link</button>
          </div>

          <div id="tab-admin" class="ev-tab-content active">
            
            <section class="dashboard-card">
              <div class="card">
                <h2>Students &amp; Hero Points</h2>
                <p class="helper-text">Filter by level/subject, select student, update points.</p>
                <form id="students-form">
                  <div class="form-row">
                    <div class="form-group">
                      <label>Level</label>
                      <select id="filter-level" class="input">
                        <option value="">All levels</option>
                        <option value="P3">P3</option>
                        <option value="P4">P4</option>
                        <option value="P5">P5</option>
                        <option value="P6">P6</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label>Subject</label>
                      <select id="filter-subject" class="input">
                        <option value="">All subjects</option>
                        <option value="P3 English">P3 English</option>
                        <option value="P3 Math">P3 Math</option>
                        <option value="P4 English">P4 English</option>
                        <option value="P4 Math">P4 Math</option>
                        <option value="P5 English">P5 English</option>
                        <option value="P5 Math">P5 Math</option>
                        <option value="P6 English">P6 English</option>
                        <option value="P6 Math">P6 Math</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label>Existing student</label>
                      <select id="student-select" class="input">
                        <option value="">-- Select student --</option>
                      </select>
                    </div>
                  </div>
                  <div id="students-list" class="students-list">
                    <p class="helper-text">Select a student above to see Hero Points.</p>
                  </div>
                  <div style="margin-top: 0.75rem;">
                    <button type="button" id="update-points-btn" class="btn">Update Points</button>
                  </div>

                  <details class="ev-collapsible" style="margin-top: 1.5rem;">
                    <summary>Edit / create student profile</summary>
                    <div class="form-row" style="margin-top:1rem;">
                      <div class="form-group">
                        <label>Name</label>
                        <input id="student-name" type="text" class="input" placeholder="e.g. Ethan Tan" />
                      </div>
                      <div class="form-group">
                        <label>Level</label>
                        <select id="student-level" class="input">
                          <option value="">-- Select --</option>
                          <option value="P3">P3</option>
                          <option value="P4">P4</option>
                          <option value="P5">P5</option>
                          <option value="P6">P6</option>
                        </select>
                      </div>
                      <div class="form-group">
                        <label>Subjects (Ctrl+Click multiple)</label>
                        <select id="student-subjects" class="input" multiple>
                          <option value="P3 English">P3 English</option>
                          <option value="P3 Math">P3 Math</option>
                          <option value="P4 English">P4 English</option>
                          <option value="P4 Math">P4 Math</option>
                          <option value="P5 English">P5 English</option>
                          <option value="P5 Math">P5 Math</option>
                          <option value="P6 English">P6 English</option>
                          <option value="P6 Math">P6 Math</option>
                        </select>
                      </div>
                    </div>
                    <button type="submit" class="btn" style="margin-top: 0.75rem;">Save / Update Student</button>
                  </details>
                </form>
              </div>
            </section>

            <section class="dashboard-card">
              <div class="card-header">Announcements</div>
              <p class="card-subtitle">Broadcast messages to the Hub.</p>
              <form id="announcement-form">
                <div class="form-field">
                  <label>Title</label>
                  <input id="announcement-title" type="text" placeholder="e.g. P6 Math Reminder" required />
                </div>
                <div class="form-field">
                  <label>Message</label>
                  <textarea id="announcement-message" rows="3" placeholder="Details..." required></textarea>
                </div>
                <div class="form-field" style="display:flex; align-items:center; gap:0.5rem; margin-bottom:1rem;">
                  <input type="checkbox" id="announcement-pinned" style="width:auto; margin:0; cursor:pointer;" />
                  <label for="announcement-pinned" style="margin:0; cursor:pointer; font-weight:600; color:var(--ev-accent);">
                    Pin to top üìå
                  </label>
                </div>
                <div class="form-field">
                  <label>Level Filter</label>
                  <select id="announcement-level" class="input">
                    <option value="">All levels</option>
                    <option value="P3">P3</option>
                    <option value="P4">P4</option>
                    <option value="P5">P5</option>
                    <option value="P6">P6</option>
                  </select>
                  <label>Subject Filter</label>
                  <select id="announcement-subject" class="input">
                    <option value="">All subjects</option>
                    <option value="P3 English">P3 English</option>
                    <option value="P3 Math">P3 Math</option>
                    <option value="P5 English">P5 English</option>
                    <option value="P5 Math">P5 Math</option>
                    <option value="P6 English">P6 English</option>
                    <option value="P6 Math">P6 Math</option>
                  </select>
                </div>
                <button type="submit" class="btn btn-primary">Post Announcement</button>
              </form>
              <div id="announcement-list" style="margin-top:1rem;"></div>
              <div class="teacher-section-footer">
                <button id="teacher-ann-toggle" type="button" class="btn btn-ghost btn-small" style="display: none;">Show older</button>
                <span id="teacher-ann-count" class="helper-text"></span>
              </div>
            </section>

          </div>
          <div id="tab-missions" class="ev-tab-content">
            
            <section class="dashboard-card" style="border: 2px dashed var(--ev-muted); opacity:0.7;">
              <div class="card-header">üèãÔ∏è The Writing Gym (Coming Soon)</div>
              <p class="helper-text">Drill Creator & Marking Inbox will go here.</p>
            </section>

            <section class="dashboard-card">
              <div class="card-header">Homework Assignments</div>
              <form id="homework-form">
                <div class="form-field">
                  <label>Title</label>
                  <input id="homework-title" type="text" placeholder="e.g. Week 2 Practice" required />
                </div>
                <div class="form-field">
                  <label>Description</label>
                  <textarea id="homework-description" rows="2"></textarea>
                </div>
                <div class="form-field">
                  <label>Links (Name ‚Äî URL)</label>
                  <div class="link-row" style="display:flex; gap:0.5rem; margin-bottom:0.5rem;">
                    <input id="homework-name-1" type="text" placeholder="Link 1 Name" style="width:40%;" />
                    <input id="homework-link-1" type="url" placeholder="https://..." style="flex:1;" required />
                  </div>
                  <div class="link-row" style="display:flex; gap:0.5rem; margin-bottom:0.5rem;">
                    <input id="homework-name-2" type="text" placeholder="Link 2 Name" style="width:40%;" />
                    <input id="homework-link-2" type="url" placeholder="https://..." style="flex:1;" />
                  </div>
                </div>
                <div class="dashboard-grid">
                  <div class="form-field">
                    <label>Level</label>
                    <select id="homework-level" class="input">
                      <option value="">All levels</option>
                      <option value="P3">P3</option>
                      <option value="P4">P4</option>
                      <option value="P5">P5</option>
                      <option value="P6">P6</option>
                    </select>
                  </div>
                  <div class="form-field">
                    <label>Subject</label>
                    <select id="homework-subject" class="input">
                      <option value="">All subjects</option>
                      <option value="P5 English">P5 English</option>
                      <option value="P5 Math">P5 Math</option>
                      <option value="P6 English">P6 English</option>
                      <option value="P6 Math">P6 Math</option>
                    </select>
                  </div>
                </div>
                <div class="dashboard-grid">
                  <div class="form-field">
                    <label>Posted Date</label>
                    <input id="homework-posted" type="date" />
                  </div>
                  <div class="form-field">
                    <label>Due Date</label>
                    <input id="homework-due" type="date" />
                  </div>
                </div>
                <button type="submit" class="btn btn-primary">Add Homework</button>
              </form>
              <div id="homework-list" style="margin-top:1rem;"></div>
              <div class="teacher-section-footer">
                <button id="teacher-hw-toggle" type="button" class="btn btn-ghost btn-small" style="display: none;">Show older</button>
                <span id="teacher-hw-count" class="helper-text"></span>
              </div>
            </section>

            <section class="dashboard-card">
              <div class="card-header">Self Training Config</div>
              <p class="card-subtitle">Manage Blooket / Quiz Links.</p>
              <form id="training-links-form">
                <div class="dashboard-grid">
                  <div class="form-field">
                    <label>P5 Links</label>
                    <input id="link-p5-english" type="url" placeholder="P5 English URL" />
                    <input id="link-p5-math" type="url" placeholder="P5 Math URL" />
                  </div>
                  <div class="form-field">
                    <label>P6 Links</label>
                    <input id="link-p6-english" type="url" placeholder="P6 English URL" />
                    <input id="link-p6-math" type="url" placeholder="P6 Math URL" />
                  </div>
                </div>
                <button type="submit" class="btn btn-primary">Save Links</button>
              </form>
            </section>

          </div>
          <div id="tab-comms" class="ev-tab-content">
            <section class="dashboard-card" style="height: 80vh;">
              <div class="card-header">Student Chat</div>
              <p class="card-subtitle">Direct line to heroes.</p>
              <div class="chat-layout" style="height: 100%;">
                <aside class="chat-sidebar" id="chat-student-list" style="max-height: 100%;"></aside>
                <section class="chat-main" style="display:flex; flex-direction:column; height: 100%;">
                  <div id="chat-thread" class="chat-window" style="flex:1; max-height:none;"></div>
                  <form id="teacher-chat-form" class="chat-form">
                    <input type="hidden" id="teacher-chat-student-id" />
                    <div class="chat-row-inputs">
                      <label class="chat-label">
                        <textarea id="teacher-chat-input" rows="2" placeholder="Reply..."></textarea>
                      </label>
                      <div class="chat-attachments">
                        <label class="file-label">üìé <input type="file" id="teacher-chat-image" accept="image/*" /></label>
                      </div>
                    </div>
                    <p id="teacher-chat-status" class="helper-text"></p>
                    <div class="chat-actions">
                      <button type="submit" class="btn btn-primary">Send</button>
                    </div>
                  </form>
                </section>
              </div>
            </section>
          </div>
          </div>
      </section>
    </main>

    <footer class="ev-footer">
      <div class="ev-container">
        <p>¬© <span id="year"></span> Edvengers Teacher Dashboard.</p>
      </div>
    </footer>

    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
    </script>
    <script src="app-teacher.js" type="module"></script>
  </body>
</html>